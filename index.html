<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Evolve or Perish</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/phaser/3.55.2/phaser.min.js"></script>
</head>
<body>
  <script>
    // Setting up a Phaser.js single-player game prototype with WASD and space bar inputs
    const config = {
      type: Phaser.AUTO,
      width: 800,
      height: 600,
      backgroundColor: '#1e1e1e',
      physics: {
        default: 'arcade',
        arcade: {
          gravity: { y: 0 },
          debug: false
        }
      },
      scene: {
        preload: preload,
        create: create,
        update: update
      }
    };

    const game = new Phaser.Game(config);

    let player;
    let keys;
    let dnaGroup;
    let score = 0;
    let scoreText;
    let progressText;
    let collectedDNA = 0;

    function preload() {
      this.load.image('player', 'https://via.placeholder.com/40x40.png?text=P'); // Placeholder for player
      this.load.image('dna', 'https://via.placeholder.com/20x20.png?text=DNA'); // Placeholder for DNA
    }

    function create() {
      // Add player
      player = this.physics.add.sprite(400, 300, 'player');
      player.setCollideWorldBounds(true);

      // Add DNA group
      dnaGroup = this.physics.add.group();

      // Spawn DNA at intervals
      this.time.addEvent({
        delay: 10000, // Every 10 seconds
        callback: spawnDNA,
        callbackScope: this,
        loop: true
      });

      // Add collision detection
      this.physics.add.overlap(player, dnaGroup, handleDNAOverlap, null, this);

      // Add UI elements
      scoreText = this.add.text(10, 10, 'Score: 0', { fontSize: '20px', fill: '#fff' });
      progressText = this.add.text(10, 40, 'Progress: 0%', { fontSize: '20px', fill: '#fff' });

      // Set up controls
      keys = this.input.keyboard.addKeys({
        up: 'W',
        down: 'S',
        left: 'A',
        right: 'D',
        collect: 'SPACE'
      });
    }

    function update() {
      // Player movement
      player.setVelocity(0);

      if (keys.left.isDown) {
        player.setVelocityX(-200);
      } else if (keys.right.isDown) {
        player.setVelocityX(200);
      }

      if (keys.up.isDown) {
        player.setVelocityY(-200);
      } else if (keys.down.isDown) {
        player.setVelocityY(200);
      }

      // Collect DNA manually when touching and pressing SPACE
      if (keys.collect.isDown) {
        dnaGroup.children.iterate(dna => {
          if (Phaser.Geom.Intersects.RectangleToRectangle(player.getBounds(), dna.getBounds())) {
            collectDNA(dna);
          }
        });
      }
    }

    function spawnDNA() {
      // Spawn DNA at a random location
      const x = Phaser.Math.Between(20, 780);
      const y = Phaser.Math.Between(20, 580);
      const dna = dnaGroup.create(x, y, 'dna');

      // Auto-destroy DNA after 8 seconds
      this.time.addEvent({
        delay: 8000,
        callback: () => dna.destroy(),
        callbackScope: this
      });
    }

    function handleDNAOverlap(player, dna) {
      // Do nothing, collection is manual with SPACE
    }

    function collectDNA(dna) {
      dna.destroy(); // Remove DNA
      score += 10; // Increment score
      collectedDNA += 1; // Track collected DNA

      // Calculate and display progress
      const progress = Math.min(100, (collectedDNA / 10) * 100).toFixed(1);
      scoreText.setText('Score: ' + score);
      progressText.setText('Progress: ' + progress + '%');
    }
  </script>
</body>
</html>

